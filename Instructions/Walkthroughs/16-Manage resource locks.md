---
wts:
    title: '16 - リソース ロックの管理'
    module: 'モジュール 03 - セキュリティ、プライバシー、コンプライアンス、および信頼性'
---
# 16 - リソース ロックの管理

このチュートリアルでは、リソース グループを作成し、リソース グループにロックを追加して削除をテストし、リソース グループ内のリソースの削除をテストし、リソース ロックを削除します。 

# タスク 1: リソース グループを作成する

このタスクでは、この演習のリソース グループを作成します。 

1. [Azure portal](https://portal.azure.com) にサインインします。

2. **「すべてのサービス」** ブレードで、**「リソース グループ」** を検索して選択し、**「+ 追加」** を選択します

3. 新しいリソース グループを作成します。完了したら、**「確認および作成」** をクリックし、**「作成」** をクリックします。 

    | 設定 | 値 |
    | -- | -- |
    | サブスクリプション | **サブスクリプションを使用する** |
    | 名前 | **myRGLocks** |
    | リージョン | **(米国) 米国東部** |
    | | |

# タスク 2:  リソース グループにロックを追加し、削除をテストする

このタスクでは、リソース グループにリソース ロックを追加し、リソース グループの削除をテストします。 

1. Azure portal で、新しく作成した**myRGLocks** リソース グループに移動します。

2. サブスクリプション、リソース グループ、または個々のリソースにロックを適用して、重要なリソースが誤って削除または変更されるのを防ぐことができます。 

3. **「設定」** セクションの **「ロック」** をクリックし、**「+ 追加」** をクリックします。 

    ![「ロック」 ウィンドウが表示されている myRGLocks リソース グループのスクリーンショット。](../images/1601.png)

4. 新しいロックを構成します。完了したら、**「OK」** をクリックします。 

    | 設定 | 値 |
    | -- | -- |
    | ロック名 | **RGLock** |
    | ロックの種類 | **Delete** |
    | | |

5. **「概要」** をクリックし、**「リソース グループの削除」** をクリックします。リソース グループの名前を入力し、**「OK」** をクリックします。リソース グループがロックされ、削除できないことを示すエラー メッセージが表示されます。

    ![削除ロックに失敗したスクリーンショット。](../images/1602.png)

# タスク 3: リソース グループのメンバーの削除をテストする

このタスクでは、リソース ロックがリソース グループのストレージ アカウントを保護するかどうかをテストします。 

1. **「すべてのサービス」** ブレードで、**「ストレージ アカウント」** を検索して選択し、**「+ 追加」** をクリックします 

2. **「ストレージ アカウントの作成」** ブレードの **「基本」** タブで次の情報を入力します (ストレージ アカウントの名前の **xxxx** は、名前がグローバルに一意になるように文字と数字に置き換えます)。それ以外のすべてのものには、既定値をそのまま使用します。

    | 設定 | 値 | 
    | --- | --- |
    | サブスクリプション | **サブスクリプションを選択します** |
    | リソース グループ | **myRGLocks** |
    | ストレージ アカウント名 | **storageaccountxxxx** |
    | 場所 | **(米国) 米国東部**  |
    | パフォーマンス | **Standard** |
    | アカウントの種類 | **StorageV2 (汎用 v2)** |
    | レプリケーション | **ローカル冗長ストレージ (LRS)** |
    | アクセス層 (既定) | **ホット** |
    | | |

3. **「確認および作成」** をクリックして、ストレージ アカウントの設定を確認し、Azure が構成を検証できるようにします。 

4. 検証が完了したら、**「作成」** をクリックしますアカウントが正常に作成されたことを示す通知を待ちます。 

5.  ストロアージ アカウントが正常に作成されたことを示す通知を待ちます。 

6. 新しいストレージ アカウントにアクセスし、**「概要」** ウィンドウで **「削除」** をクリックします。リソースまたはその親が削除ロックを持っていることを示すエラー メッセージが表示されます。 

    ![ストレージ アカウントの削除中にエラーが発生した場合のスクリーンショット。](../images/1603.png)

    **注**: ストレージ アカウント専用のロックは作成しませんでしたが、ストレージ アカウントを含むリソース グループ レベルでロックを作成しました。このように、この*親*レベルのロックによりリソースを削除できなくなるため、ストレージ アカウントは親からロックを継承します。

# タスク 4: リソース ロックを解除する

このタスクでは、リソースロックを解除してテストします。 

1. **myRGLocks** リソース グループ のブレードに戻り、**「設定」** セクションで **「ロック」** をクリックします。
    
2. **RGLock** エントリの右側にある **「削除」** をクリックします。

    ![「削除」 リンクが強調表示されたロックのスクリーンショット。](../images/1604.png)

3. ストレージ アカウント ブレードに戻り、リソースを削除できるようになったことを確認します。

お疲れさまでした! リソース グループを作成し、リソース グループにロックを追加して削除をテストし、リソース グループ内のリソースの削除をテストし、リソース ロックを削除しました。 

**注**: 追加コストを回避するには、このリソース グループを削除します。リソース グループを検索し、リソース グループをクリックして、**「リソース グループの削除」** をクリックします。リソース グループの名前を確認し、**「削除」** をクリックします。**通知**を監視して、削除の進行状況を確認します。
---
wts:
    title: '08 - Azure Functions の実装 (5 分)'
    module: 'モジュール 03: コア ソリューションおよび管理ツールに関する説明'
---
# 08 - Azure Functions の実装

このチュートリアルでは、HTTP 要求がある場合に Hello メッセージを表示する関数アプリを作成します。 

# タスク 1: 関数アプリを作成する (5 分)

このタスクでは、Function アプリを作成します。

1. [Azure Portal](https://portal.azure.com) にサインインします。

1. ポータルの一番上にある **リソース、サービス、ドキュメントの検索** テキスト ボックスで **関数アプリ** を検索、選択し、**関数アプリ** ブレードで [+ 追加] をクリックします。

1. **関数アプリ** ブレードの **基本** タブで、次の設定を指定します (関数名がグローバルに一意になるように関数名の **xxxx** を文字と数字で置き換え、その他の設定はすべて既定値のままにしておきます): 

    | 設定 | 値 |
    | -- | --|
    | サブスクリプション | お使いの Azure サブスクリプションの名前 |
    | リソース グループ | 新規リソース グループ **myRGFunction** の名前 |
    | 関数アプリ名 | **関数-xxxx** |
    | 発行 | **コード** |
    | ランタイム スタック | **.NET Core** |
    | Version | **3.1** |
    | リージョン | **米国東部** |
    | | |

    **注記** - **関数アプリ名** が一意になるように **xxxx** を忘れずに変更してください

1. **レビュー + 作成** をクリックし、正常に認証されたら、**作成** をクリックして、新しい Azure 関数アプリのプロビジョニングとデプロイを開始します。

1. リソースが作成されたことを伝える通知が表示されるまで待ちます。

1. **関数アプリ** ブレードに戻り、**更新** をクリックして、新規作成された関数アプリが **実行中** のステータスであることを確認します。 

    ![新しい関数アプリを使用した 「関数アプリ」 ページのスクリーンショット。](../images/0701.png)

# タスク 2: HTTP トリガー関数とテストを作成します。

このタスクでは、Webhook + API 関数を使用して、HTTP 要求がある場合にメッセージを表示します。 

1. **関数アプリ** ブレードで、新規作成された関数アプリをクリックします。 

1. 関数アプリ ブレードの **関数** セクションで、**関数** をクリックし、**+ 追加** をクリックします。

    ![Azure Portal 内の [.NET 用の Azure Functions - 作業の開始] ペインで開発環境を選択する手順を示すスクリーンショット。新しいポータル内関数を作成するための表示要素が強調表示されます。強調表示される要素は、関数アプリの展開、新しい関数の追加、[ポータル内]、[続行] ボタンです。](../images/0702.png)

1. **新しい関数** ブレードの **テンプレート** タブで、**HTTP トリガー** をクリックします。 

    ![Azure Portal 内の [.NET 用の Azure Functions - 作業の開始] ペインで関数を作成する手順を示すスクリーンショット。Azure Function に新しい webhook を追加するために使用される表示要素を示すため、HTTP トリガー カードが強調表示されます。](../images/0702a.png)

1. **新しい関数** ブレードの **詳細** タブで、既定の **新しい関数** 名と **承認レベル** に同意し、**関数の作成** をクリックします。 

    ![Azure Portal 内の [.NET 用の Azure Functions - 作業の開始] ペインで関数を作成する手順を示すスクリーンショット。Azure Function に新しい webhook を追加するために使用される表示要素を示すため、[WebHook + API] ボタンと [作成] ボタンが強調表示されます。](../images/0703.png)

1. **HttpTrigger1** ブレードの **Developer** セクションで、**コードとテスト** をクリックします。 

1. **HttpTrigger1 | コードとテスト** ブレードで、自動生成コードを見直し、コードが HTTP 要求を実行し、情報をログ記録するコードになっていることを確認します。また、関数によって名前付きの Hello メッセージが返されることも確認します。 

    ![関数コードのスクリーンショット。Hello メッセージが強調表示されます。](../images/0704.png)

1. 関数エディターの上部から 「**関数 URL の取得**」 を選択します。 

1. 「**キー**」 ドロップダウン値を **既定値 (ファンクション キー)** に設定します。次に、「**コピー**」 を選択して関数の URL をコピーします。 

    ![Azure ポータルの関数エディター内の関数 URL 取得ペインのスクリーンショット。「関数の URL の取得」 ボタン、「キー」 を設定するドロップダウン リスト、URL の 「コピー」 ボタンの表示要素が強調表示され、関数エディターから関数の URL を取得してコピーする方法が示されます。](../images/0705.png)

1. コピーした関数 URL を Web ブラウザーのアドレス バーに貼り付けます。ページが要求されると、関数が実行されます。関数に名前が必要であるというメッセージが表示されます。 

    ![名前の提供を求めるメッセージのスクリーンショット。](../images/0706.png)

1. URL の末尾に **&name=*yourname*** を追加します。 

    **注記**: ここでは、***yourname*** にユーザーの名前を入力します。最終的なURLは、`https://azfuncxxx.azurewebsites.net/api/HttpTrigger1?code=X9xx9999xXXXXX9x9xxxXX==&name=cindy` のようになります

    ![強調表示された関数 URL のスクリーンショットと、Web ブラウザーのアドレス バーに追加されたユーザー名の例。メイン ブラウザー ウィンドウ内に関数の出力を示す Hello メッセージとユーザー名も強調表示されます。](../images/0707.png)

1. 関数が実行されると、Azure のログ ファイルにトレース情報が書き込まれます。Azure Portal でログを表示するには、関数エディターに戻り、「**ログ**」 ボタンを選択します。

    ![Azure Portal の関数エディター内で関数を実行した結果のトレース情報ログのスクリーンショット。トレース情報にアクセスするためのログボタンとログの内容の一部が強調表示され、関数エディターからトレース情報ログにアクセスして読み取る方法を示します。](../images/0709.png)

お疲れさまでした。このチュートリアルでは、HTTP 要求がある場合に Hello メッセージを表示する関数アプリを作成しました。 

**注記**: 追加コストを回避するには、このリソース グループを削除します。リソース グループを検索し、リソース グループをクリックして、「**リソース グループの削除**」 をクリックします。リソース グループの名前を確認し、「**削除**」 をクリックします。**通知** を監視して、削除の進行状況を確認します。
